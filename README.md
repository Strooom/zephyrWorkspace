# Zephyr Workspace Template


This repo contans the files typically needed in a West Workspace for a Zephyr Project.
```
workspaceFolder/
├── .claude/
│   └── agents/
├── .vscode/
├── .west/
│   └── config
├── .gitattributes
├── .gitignore
├── CLAUDE.md
├── README.md
└── zephyrWorkspace.code-workspace
```

## Prerequisites
* I assume you are on Linux Ubuntu or on Windows WSL Ubuntu. I tried to make this work for Windows, but once you touch more advanced things, Windows is no longer supported.
* So set up a Linux or WSL and follow the first two steps of Zephyr's Getting Started Guide :
  * Install dependencies : this is installing a number of Linux tools (Python, CMake, DTC and others) needed by Zephyr. Let those tools install in their preferred locations.
  * I created a folder `~/projects/zephyr` which will hold all my Zephyr development projects.
  * Set up a `Virtual Environment` for Python. Zephyr is using a lot of Python and requires a very specific setup for Python. It's more robust to have all this together in a separate folder, and that is what a virtual environment does. I have created my `venv` in `~/projects/zephyr/venv`, so it stays close to my projects.
  * Whenever you are using a terminal, it needs to have that virtual environment **activated**. To make this easier, I created an alias in my .bashrc : `alias activate='source ~/projects/zephyr/venv/bin/activate'`

## Template or Project
In the next steps you'll first create a `West Workspace` which in turn contains your `new zephyrProject`. 
```
West Workspace/
└── zephyrProject
```

Over time you will configure the zephyr project with specific stuff beyond the template. So you probably want to first create a new repository (eg myZephyrProject) from the template (zephyrProject), and use this in Step 2. 

Note : this template has `develop` as default branch

## Step 1 : Clone the repository into the location of your **West Workspace** for the new **Zephyr Project**
```shell
activate
mkdir <newZephyrProjectWorkspaceName>
git clone https://github.com/Strooom/zephyrWorkspace <newZephyrProjectWorkspaceName>
```

## Step 2 : Clone the repository for the **Zephyr Project**
```shell
git clone https://github.com/Strooom/<zephyrProjectName> -b develop app
```

## Step 3 : Initialise West
```shell
west init -l app
```

## Step 4 : West Update
This will take a while and download ~2.4 Gbyte in folders /zephyr and /modules

It will **not** go in the repository. It can always be deleted and regenerated later.
```shell
west update
```

## Step 5 : Optional : Update the virtual Python environment and its tools
Open a Terminal, which should automatically activate the shared .venv

Then run the following commands for updating all tools
```shell
python -m pip install --upgrade pip
pip install --upgrade west jsonschema
pip install --upgrade -r zephyr\scripts\requirements.txt
```

# Result
Now the repository should look like
```
workspaceFolder/
├── .claude/
│   └── agents/
├── .vscode/
├── .west/
│   └── config
├── app/                    ← zephyrProject repo (Step 2)
│   ├── boards/
│   ├── lib/
│   ├── src/
│   ├── tests/
│   ├── CMakeLists.txt
│   ├── prj.conf
│   └── west.yml
├── modules/                ← generated by west update (Step 4)
├── zephyr/                 ← generated by west update (Step 4)
├── .gitattributes
├── .gitignore
├── CLAUDE.md
├── README.md
└── zephyrWorkspace.code-workspace
```


# Notes
* the `west.yml` in the zephyrProject repo has `revision: main`, which will install the latest version. You may want to fix this to a certain release.
